name: ğŸ•µï¸ Website Vulnerability Scan (OWASP ZAP Full Scan)

# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’GitHub Actionsã®UIã‹ã‚‰æ‰‹å‹•ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™
on:
  workflow_dispatch:
    inputs:
      target_url:
        description: 'Scan Target URL (e.g., https://www.example.com)'
        required: true
        type: string

jobs:
  zap_full_scan:
    runs-on: ubuntu-latest
    name: Run ZAP Full Scan
    
    steps:
      # 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ (è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç­‰ã‚’ä½¿ã†å ´åˆã«å¿…è¦)
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # 2. OWASP ZAP Full Scan ã‚’å®Ÿè¡Œ
      - name: OWASP ZAP Full Scan
        uses: owasp/zap-action-full-scan@v0.10.0 # ZAPã®ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ç”¨Action
        with:
          # æ‰‹å‹•å®Ÿè¡Œæ™‚ã«å…¥åŠ›ã•ã‚ŒãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆURL
          target: ${{ github.event.inputs.target_url }}

          # ã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’ 'zap-scan-report' ã¨ã„ã†åå‰ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ(ZIPãƒ•ã‚¡ã‚¤ãƒ«)ã¨ã—ã¦
          # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã“ã®ä¸­ã«è¶…è©³ç´°ãªHTMLãƒ¬ãƒãƒ¼ãƒˆãŒå«ã¾ã‚Œã¾ã™ã€‚
          artifact_name: zap-scan-report
          
          # (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) ç‰¹å®šã®ãƒ«ãƒ¼ãƒ«ã‚’ç„¡è¦–ã™ã‚‹å ´åˆãªã©ã«ä½¿ã„ã¾ã™ (ä¾‹: '-z "-config rule.10020.threshold=OFF"')
          # cmd_options: ''

          # (æ³¨) create_issue: true ã«ã™ã‚‹ã¨è„†å¼±æ€§ãŒè¦‹ã¤ã‹ã‚‹ãŸã³ã«IssueãŒä½œã‚‰ã‚Œã¾ã™ãŒã€
          # å¤§é‡ã«ä½œã‚‰ã‚Œã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ã¾ãšã¯ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ç¢ºèªã‚’æ¨å¥¨ã—ã¾ã™ã€‚
          # create_issue: false
